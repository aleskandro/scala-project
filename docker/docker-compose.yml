version: '2'
services:
    advproject_apache:
      container_name: advproject_apache
      build: apache
      restart: always
      volumes:
        - ../public_html:/var/www
        - ./apache/sites-available:/etc/apache2/sites-available
      ports:
        - 80:80
      environment:
        - VIRTUALHOST=advproject.dev

    advproject_mongodb:
      image: mongo:latest
      container_name: "advproject_mongodb"
      environment:
        - MONGO_DATA_DIR=/data/db
        - MONGO_LOG_DIR=/dev/null
      volumes:
        - advproject_db:/data/db
      ports:
        - 27017:27017
      command: mongod --smallfiles # --quiet

volumes:
    advproject_db:
